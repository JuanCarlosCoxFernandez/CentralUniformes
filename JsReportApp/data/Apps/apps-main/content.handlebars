<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gr치fico de URLs</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h2 {
            color: #333;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        img {
            max-width: 50px;
            max-height: 50px;
        }
    </style>
</head>
<body>
    <h2>Listado de Aplicaciones</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Icono</th>
            <th>URL</th>
            <th>Fecha de Creaci칩n</th>
            <th>Fecha de Actualizaci칩n</th>
        </tr>
    </table>

    <canvas id="urlChart" width="400" height="200"></canvas>

    <script>
        var jsonData = {
            "success": true,
            "message": "Application retrieved successfully.",
            "data": [
                {"id":1,"icon":"1702583747.png","URL":"applicationsview","created_at":"2023-12-14T15:19:05.000000Z","updated_at":"2023-12-14T19:55:47.000000Z"},
                {"id":2,"icon":"1702581234.jpg","URL":"employeesview","created_at":"2023-12-14T19:13:54.000000Z","updated_at":"2023-12-14T19:13:54.000000Z"},
                {"id":3,"icon":"1702583822.png","URL":"rolesview","created_at":"2023-12-14T19:57:02.000000Z","updated_at":"2023-12-14T19:57:02.000000Z"},
                {"id":4,"icon":"1702584040.png","URL":"newsview","created_at":"2023-12-14T20:00:40.000000Z","updated_at":"2023-12-14T20:00:40.000000Z"},
                {"id":5,"icon":"1702658124.png","URL":"http://google.com","created_at":"2023-12-15T16:35:24.000000Z","updated_at":"2023-12-17T05:09:34.000000Z"}
            ]
        };

        // Mostrar datos en la tabla
        var table = document.querySelector("table");
        jsonData.data.forEach(item => {
            var row = table.insertRow(-1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);

            cell1.textContent = item.id;
            cell2.innerHTML = '<img src="' + item.icon + '" alt="Icono">';
            cell3.textContent = item.URL;
            cell4.textContent = item.created_at;
            cell5.textContent = item.updated_at;
        });

        // Crear el gr치fico
        var httpUrls = jsonData.data.filter(item => item.URL.startsWith("http"));
        var nonHttpUrls = jsonData.data.filter(item => !item.URL.startsWith("http"));

        var ctx = document.getElementById("urlChart").getContext("2d");

        var chart = new Chart(ctx, {
            type: "bar",
            data: {
                labels: ["HTTP URLs", "No HTTP URLs"],
                datasets: [{
                    label: "Cantidad de URLs",
                    data: [httpUrls.length, nonHttpUrls.length],
                    backgroundColor: ["blue", "red"]
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 1
                        }
                    },
                    x: {
                        type: 'category',
                        labels: ["HTTP URLs ("+httpUrls.length+")", "No HTTP URLs ("+nonHttpUrls.length+")"],
                        title: {
                            display: true,
                            text: 'Tipo de URLs'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
